angular.module("fgModal",["ngAnimate"]).provider("Modal",function(){var n=function(n,e){this.templateUrl=e.templateUrl,this.template=e.template,this.defaults=e.defaults,this.controller=e.controller,this.name=n},e={},t=this;this.modal=function(o,i){return e[o]=function(e){var t=e.invoke(i);return new n(o,t)},t},this.$get=["$document","$compile","$rootScope","$http","$templateCache","$q","$animate","$injector","$controller",function(t,o,i,r,c,s,l,a,u){Object.keys(e).forEach(function(n){e[n]=e[n](a)});var f,h=i.$new(),d=[],p=function(n){var e=this,t={},o={when:function(n){return s.all(o[n].map(function(n){return s.when(n())})).then(function(){return t[n].resolve(),t[n].promise})},call:function(n){o[n].forEach(function(n){n()})}};"accept dismiss link overlay conceal destroy".split(" ").forEach(function(n){o[n]=[],t[n]=s.defer()}),this.$template=n,this.$index=0,this.accept=function(){return o.when("accept").then(e.destroy)},this.dismiss=function(){return o.when("dismiss").then(e.destroy)},this.destroy=function(){return o.when("destroy").then(function(){var n=d.indexOf(e);d.splice(n,1),e.element.remove(),d.forEach(function(n){n.$index>e.$index&&n.overlay()}),h.show=d.length,e.$scope.$destroy()})},this.when=function(n){return t[n].promise},this.link=function(t,i){e.element=i,e.$scope=t,n.controller&&u(n.controller,{$scope:t,$modal:e}),f.append(i),e.element.css("z-index",1e4),d.forEach(function(n){n.conceal()}),d.unshift(e),h.show=!0,o.call("link")},this.overlay=function(){0!==e.$index&&(e.element.css("z-index","+=1"),e.$index--,o.call("overlay"))},this.conceal=function(){e.element.css("z-index","-=1"),e.$index++,o.call("conceal")},this.on=function(n,t){return n.split(" ").forEach(function(n){o[n].push(t.bind(e))}),e}};o(angular.element('<div class="fg-modal-wrapper ng-hide" ng-show="show"></div>'))(h,function(n){f=n,t.find("body").append(f)}),n.prototype.pop=function(n){var e=new p(this);if(n=n||{},"Scope"!==n.constructor.name){var t=i.$new();for(var s in n)t[s]=n[s];n=t}else n=n.$new();n.$modal=e;var l=this,a=function(t){o(t)(n,function(t){e.link(n,t)})};return this.templateUrl?r({method:"GET",cache:c,url:this.templateUrl,type:"text/html"}).success(a):a(this.template),this.defaults&&Object.keys(this.defaults).forEach(function(n){l.defaults[n]instanceof Array?l.defaults[n].forEach(function(t){e.on(n,t)}):e.on(n,l.defaults[n])}),e};var m=function(n){return n?e[n]:d[0]};return m.list=function(){return d.sort(function(n,e){return n.$index>e.$index})},m}]});